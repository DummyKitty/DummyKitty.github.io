<!DOCTYPE html><html lang="en">
  <head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>ASP.NET 代码审计 - DumKiy's blog</title>

<meta name="description" content="Methodology of Code ReviewCode review is a systematic task that requires us to identify security vulnerabilities in existing code. We need to build a model t...">
<link rel="canonical" href="http://localhost:4000/asp.net/2023/03/25/Code-Review-in-ASP-NET.html"><link rel="alternate" type="application/rss+xml" title="DumKiy's blog" href="/feed.xml"><!-- start favicons snippet, use https://realfavicongenerator.net/ --><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#fc4d50"><link rel="shortcut icon" href="/assets/favicon.ico">

<meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/browserconfig.xml">

<meta name="theme-color" content="#ffffff">
<!-- end favicons snippet --><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.css" ><!-- start custom head snippets -->

<!-- end custom head snippets -->
<script>(function() {
  window.isArray = function(val) {
    return Object.prototype.toString.call(val) === '[object Array]';
  };
  window.isString = function(val) {
    return typeof val === 'string';
  };

  window.hasEvent = function(event) {
    return 'on'.concat(event) in window.document;
  };

  window.isOverallScroller = function(node) {
    return node === document.documentElement || node === document.body || node === window;
  };

  window.isFormElement = function(node) {
    var tagName = node.tagName;
    return tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';
  };

  window.pageLoad = (function () {
    var loaded = false, cbs = [];
    window.addEventListener('load', function () {
      var i;
      loaded = true;
      if (cbs.length > 0) {
        for (i = 0; i < cbs.length; i++) {
          cbs[i]();
        }
      }
    });
    return {
      then: function(cb) {
        cb && (loaded ? cb() : (cbs.push(cb)));
      }
    };
  })();
})();
(function() {
  window.throttle = function(func, wait) {
    var args, result, thisArg, timeoutId, lastCalled = 0;

    function trailingCall() {
      lastCalled = new Date;
      timeoutId = null;
      result = func.apply(thisArg, args);
    }
    return function() {
      var now = new Date,
        remaining = wait - (now - lastCalled);

      args = arguments;
      thisArg = this;

      if (remaining <= 0) {
        clearTimeout(timeoutId);
        timeoutId = null;
        lastCalled = now;
        result = func.apply(thisArg, args);
      } else if (!timeoutId) {
        timeoutId = setTimeout(trailingCall, remaining);
      }
      return result;
    };
  };
})();
(function() {
  var Set = (function() {
    var add = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (data[i] === item) {
          return;
        }
      }
      this.size ++;
      data.push(item);
      return data;
    };

    var Set = function(data) {
      this.size = 0;
      this._data = [];
      var i;
      if (data.length > 0) {
        for (i = 0; i < data.length; i++) {
          add.call(this, data[i]);
        }
      }
    };
    Set.prototype.add = add;
    Set.prototype.get = function(index) { return this._data[index]; };
    Set.prototype.has = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (this.get(i) === item) {
          return true;
        }
      }
      return false;
    };
    Set.prototype.is = function(map) {
      if (map._data.length !== this._data.length) { return false; }
      var i, j, flag, tData = this._data, mData = map._data;
      for (i = 0; i < tData.length; i++) {
        for (flag = false, j = 0; j < mData.length; j++) {
          if (tData[i] === mData[j]) {
            flag = true;
            break;
          }
        }
        if (!flag) { return false; }
      }
      return true;
    };
    Set.prototype.values = function() {
      return this._data;
    };
    return Set;
  })();

  window.Lazyload = (function(doc) {
    var queue = {js: [], css: []}, sources = {js: {}, css: {}}, context = this;
    var createNode = function(name, attrs) {
      var node = doc.createElement(name), attr;
      for (attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          node.setAttribute(attr, attrs[attr]);
        }
      }
      return node;
    };
    var end = function(type, url) {
      var s, q, qi, cbs, i, j, cur, val, flag;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        s[url] = true;
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (cur.urls.has(url)) {
            qi = cur, val = qi.urls.values();
            qi && (cbs = qi.callbacks);
            for (flag = true, j = 0; j < val.length; j++) {
              cur = val[j];
              if (!s[cur]) {
                flag = false;
              }
            }
            if (flag && cbs && cbs.length > 0) {
              for (j = 0; j < cbs.length; j++) {
                cbs[j].call(context);
              }
              qi.load = true;
            }
          }
        }
      }
    };
    var load = function(type, urls, callback) {
      var s, q, qi, node, i, cur,
        _urls = typeof urls === 'string' ? new Set([urls]) : new Set(urls), val, url;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (_urls.is(cur.urls)) {
            qi = cur;
            break;
          }
        }
        val = _urls.values();
        if (qi) {
          callback && (qi.load || qi.callbacks.push(callback));
          callback && (qi.load && callback());
        } else {
          q.push({
            urls: _urls,
            callbacks: callback ? [callback] : [],
            load: false
          });
          for (i = 0; i < val.length; i++) {
            node = null, url = val[i];
            if (s[url] === undefined) {
              (type === 'js' ) && (node = createNode('script', { src: url }));
              (type === 'css') && (node = createNode('link', { rel: 'stylesheet', href: url }));
              if (node) {
                node.onload = (function(type, url) {
                  return function() {
                    end(type, url);
                  };
                })(type, url);
                (doc.head || doc.body).appendChild(node);
                s[url] = false;
              }
            }
          }
        }
      }
    };
    return {
      js: function(url, callback) {
        load('js', url, callback);
      },
      css: function(url, callback) {
        load('css', url, callback);
      }
    };
  })(this.document);
})();
</script><script>
  (function() {
    var TEXT_VARIABLES = {
      version: '2.2.6',
      sources: {
        font_awesome: 'https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.css',
        jquery: 'https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js',
        leancloud_js_sdk: '//cdn.jsdelivr.net/npm/leancloud-storage@3.13.2/dist/av-min.js',
        chart: 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js',
        gitalk: {
          js: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.js',
          css: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.css'
        },
        valine: 'https://unpkg.com/valine/dist/Valine.min.js',
        mathjax: 'https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML',
        mermaid: 'https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js'
      },
      site: {
        toc: {
          selectors: 'h1,h2,h3,h4'
        }
      },
      paths: {
        search_js: '/assets/search.js'
      }
    };
    window.TEXT_VARIABLES = TEXT_VARIABLES;
  })();
</script>
</head>
  <body>
    <div class="root" data-is-touch="false">
      <div class="layout--page js-page-root"><div class="page__main js-page-main page__viewport has-aside cell cell--auto">

      <div class="page__main-inner"><div class="page__header d-print-none"><header class="header"><div class="main">
      <div class="header__title">
        <div class="header__brand"><?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="512.000000pt" height="512.000000pt" viewBox="0 0 512.000000 512.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.14, written by Peter Selinger 2001-2017
</metadata>
<g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M825 4372 c-184 -12 -365 -129 -444 -287 -64 -129 -61 -53 -58 -1555
l2 -1365 29 -70 c58 -141 151 -240 280 -299 110 -51 50 -49 1941 -48 1722 0
1772 1 1837 20 183 52 330 209 373 395 13 58 15 235 13 1429 -2 995 -6 1370
-14 1388 -7 14 -20 45 -30 70 -66 161 -226 287 -401 316 -36 6 -3441 12 -3528
6z m3557 -236 c31 -13 70 -34 86 -47 42 -34 92 -113 107 -168 9 -35 11 -365
10 -1376 -1 -1473 4 -1368 -66 -1459 -19 -24 -52 -56 -75 -70 -94 -60 34 -56
-1883 -56 -1617 0 -1762 1 -1807 17 -27 9 -54 21 -61 27 -6 6 -27 22 -47 36
-46 33 -92 112 -104 180 -15 77 -9 2674 5 2716 36 104 126 190 224 212 28 6
684 10 1799 11 l1755 0 57 -23z"/>
<path d="M1241 3509 c-27 -11 -47 -32 -61 -66 -22 -53 1 -81 409 -489 l395
-394 -395 -394 c-289 -290 -397 -404 -406 -430 -31 -90 68 -165 154 -117 10 5
215 207 455 448 291 291 439 447 443 466 4 15 4 39 0 55 -7 30 -860 893 -907
918 -31 16 -53 17 -87 3z"/>
<path d="M2551 1809 c-105 -14 -133 -147 -41 -194 44 -23 1336 -23 1380 0 71
37 73 136 4 182 -23 15 -84 16 -662 17 -350 1 -657 -2 -681 -5z"/>
</g>
</svg>
<a title="Watch And Learn
" href="/">DumKiy's blog</a></div><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></div><nav class="navigation">
        <ul><li class="navigation__item"><a href="/">Home</a></li><li class="navigation__item"><a href="/categories.html">Categories</a></li><li class="navigation__item"><a href="/tags.html">tags</a></li><li class="navigation__item"><a href="/about.html">About</a></li><li class="navigation__item"><a href="/Resources.html">Resources</a></li><li class="navigation__item"><a href="https://github.com/DummyKitty">GitHub</a></li><li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li></ul>
      </nav></div>
  </header>
</div><div class="page__content"><div class ="main"><div class="grid grid--reverse">

              <div class="col-aside d-print-none js-col-aside"><aside class="page__aside js-page-aside"><div class="toc-aside js-toc-root"></div>
</aside></div>

              <div class="col-main cell cell--auto"><!-- start custom main top snippet -->

<!-- end custom main top snippet -->
<article itemscope itemtype="http://schema.org/Article"><div class="article__header"><header><h1>ASP.NET 代码审计</h1></header><span class="split-space">&nbsp;</span>
          <a class="edit-on-github"
            title="Edit on Github"
            href="https://github.com/user_name/repo_name/tree/master/_posts/2023-03-24-Code-Review-in-ASP-NET.md">
            <i class="far fa-edit"></i></a></div><meta itemprop="headline" content="ASP.NET 代码审计"><div class="article__info clearfix">
      <div class="right-col">
         <ul class="menu"> <span style="font-size: 1.2em;">📂</span><li>
              <a class="button button--secondary button--pill button--sm"
                href="/categories.html?tag=ASP.NET">ASP.NET</a>
            </li></ul>
      </div>
      <div class="right-col"><ul class="left-col menu"> <span style="font-size: 1.2em;">📌</span><li>
              <a class="button button--secondary button--pill button--sm"
                href="/tags.html?tag=ASP.NET">ASP.NET</a>
            </li></ul></div><ul class="left-col menu"><li><i class="far fa-calendar-alt"></i> <span>Mar 25, 2023</span>
            </li></ul></div><meta itemprop="author" content="DumKiy"/><meta itemprop="datePublished" content="2023-03-25T07:15:11+08:00">
    <meta itemprop="keywords" content="ASP.NET"><div class="js-article-content"><div class="layout--article"><!-- start custom article top snippet -->

<!-- end custom article top snippet -->
<div class="article__content" itemprop="articleBody"><h1 id="methodology-of-code-review">Methodology of Code Review</h1>

<p>Code review is a systematic task that requires us to identify security vulnerabilities in existing code. We need to build a model that can be used to guide the proccess of code reviewing.</p>

<p>Below are some of my thoughts.</p>

<ol>
  <li>Network protocol</li>
  <li>Sensitive information leak: include hard code credentials, public-private key, IP, URL and source code etc.</li>
  <li>Risk of configuration</li>
  <li>Risk of Component</li>
  <li>
    <p>Vulnerabilities of code</p>

    <ol>
      <li>Broken Access Control</li>
      <li>Injection</li>
      <li>etc</li>
    </ol>
  </li>
</ol>

<p>‍</p>

<h1 id="learn-basic-of-aspnet">Learn Basic of ASP.NET</h1>

<p>Learn from video is the fast way to improve you operation skill.</p>

<ul>
  <li><a href="https://www.bilibili.com/video/BV16X4y1V7qH/?p=6&amp;spm_id_from=pageDriver">使用ASP.NET开发Web应用程序</a></li>
</ul>

<p>‍</p>

<h2 id="official-document">Official Document</h2>

<ul>
  <li><a href="https://learn.microsoft.com/en-us/aspnet/overview">ASP.NET overview</a></li>
  <li><a href="https://learn.microsoft.com/en-us/iis/configuration/">IIS configuration</a></li>
</ul>

<p>‍</p>

<h2 id="build-a-sample-application">Build a sample application</h2>

<p>Create new web application in vs.</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216085115-d9391wd.png" alt="20230216085115-d9391wd" /></p>

<p>The visual studio will automatically create a Web Form website</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216085242-ffxi89c.png" alt="20230216085242-ffxi89c" /></p>

<p>It cann be noticed that an aspx file is actually composed of two parts, the front-end .aspx file and the back-end .cs file.</p>

<p>The “CodeFile” specified in the front-end .aspx file refers to the corresponding .cs file.</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216085442-479sxxe.png" alt="20230216085442-479sxxe" /></p>

<p>All of .cs file are inherit from the Page class.</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216085347-js8o565.png" alt="20230216085347-js8o565" />
‍</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216085552-cxd53cv.png" alt="20230216085552-cxd53cv" /></p>

<p>‍</p>
<h2 id="empty-web-application">Empty web application</h2>

<p>Ceate a empty website</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216085659-4t5dfcw.png" alt="20230216085659-4t5dfcw" /></p>

<p>Creat a Web Form</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216085815-d667kw7.png" alt="20230216085815-d667kw7" /></p>

<p>This will generate an aspx file.</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216085857-z3p014w.png" alt="20230216085857-z3p014w" /></p>

<p>点击下方的拆分可以同时看到 aspx 前端源码以及设计界面。</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216090055-0wabacp.png" alt="20230216090055-0wabacp" /></p>

<p>Open the tool box</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216090219-sqhhgee.png" alt="20230216090219-sqhhgee" /></p>

<p>We can drag corresponding controls from the toolbox onto the design surface. Here is an TextBox and I modifyied its ID in the properties page.</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216091014-ca4ft8t.png" alt="20230216091014-ca4ft8t" /></p>

<p>Other controls are the same, such as the button below.</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216093355-v1xkm7t.png" alt="20230216093355-v1xkm7t" /></p>

<p>So as the following label.</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216093554-mkm8nbo.png" alt="20230216093554-mkm8nbo" /></p>

<p>Double-clicking on a control in the design surface will take you to the code editor. The <code class="language-plaintext highlighter-rouge">btnSure_Click</code>​​is the function that is executed when the button is click.</p>

<p><img src="https://de34dnotespics.oss-cn-beijing.aliyuncs.com/img/图片-20230216093706-t4lwssn.png" alt="20230216093706-t4lwssn" /></p>

<p>We can code whatever within this function.</p>

<p>‍</p>

<h1 id="build-environment">Build Environment</h1>

<h2 id="aspnet-environment">ASP.NET Environment</h2>

<ul>
  <li>
    <p><a href="https://edi.wang/post/2010/7/18/setup-iis-in-windows7-both-asp-and-aspnet">Win7下利用IIS自建网站全攻略！包括ASP和ASP.NET动态网站！高手勿入</a></p>
  </li>
  <li>
    <p><a href="https://developer.aliyun.com/article/343659">Asp.Net MVC3.0项目部署到Win7 64过程总结</a></p>
  </li>
</ul>

<p>‍</p>

<h3 id="sql-server">SQL Server</h3>

<ul>
  <li>
    <p><a href="https://www.daktronics.com/en-us/support/kb/DD3400198">How to download and install Microsoft SQL Server Management Studio 2008 for SQL Server 2008</a></p>
  </li>
  <li>
    <p><a href="https://www.microsoft.com/zh-TW/download/details.aspx?id=30438">Microsoft® SQL Server® 2008 R2 SP2 - Express Edition</a></p>
  </li>
  <li>
    <p><a href="https://www.cnblogs.com/turnip/p/12145330.html">SQL Server Management Studio 教程一：设置sa用户登录</a></p>
  </li>
</ul>

<p>‍</p>

<h2 id="tools">Tools</h2>

<h3 id="sast-tools">SAST tools</h3>

<h4 id="fortify-sca">Fortify SCA</h4>

<p>Fortify Static Code Analyzer (SCA) is a software security tool that is used to identify and fix vulnerabilities in software applications. It is designed to analyze the source code of an application and identify potential security flaws before the application is deployed. Fortify SCA provides developers with a comprehensive security analysis of their code, including identifying vulnerabilities, providing remediation guidance, and tracking progress over time. This helps organizations to build more secure applications and reduce the risk of security breaches.</p>

<p>Download links:</p>

<blockquote>
  <p>version 22.1</p>
</blockquote>

<p>链接：https://pan.baidu.com/s/1K5QdQJCjzeW5_MVfcPR45g?pwd=4j0u<br />
提取码：4j0u<br />
–来自百度网盘超级会员V5的分享</p>

<blockquote>
  <p>version 20.1.1</p>
</blockquote>

<p>链接：https://pan.baidu.com/s/1jleP1gfHUfkqer2kAULYnA?pwd=wcmt<br />
提取码：wcmt<br />
–来自百度网盘超级会员V5的分享</p>

<p>解压密码：shungg.cn</p>

<p>‍</p>

<h4 id="dnspy">dnSpy</h4>

<p>dnSpy is a free and open-source .NET debugger and assembly editor. It is used by developers and security researchers to reverse engineer .NET applications and analyze their code. dnSpy can decompile .NET assmblies into C#,Visual Basic and IL code, allowing users to view and modify the code of an application. It also includes a debugger that allow users to stop through the code of an application, set breakpoints, and inpsect variables.</p>

<p>dnSpy supports a wide range of .NET assemblies, including .NET core, .NET Standard, and .NET Framework.</p>

<p>Download  link:</p>

<ul>
  <li>https://github.com/dnSpy/dnSpy</li>
</ul>

<p>‍</p>

<h4 id="dotpeek">dotPeek</h4>

<p>dotPeek is a free and lightweight .NET decompiler and code viewer developed by JetBrains. It is used by developers and software engineers to reverse engineer .NET applications and view their source code. dotPeek can decompile .NET assemblies into C#, VB.NET, and IL code, allowing users to easily view and analyze the code of an application.</p>

<p>Download link:</p>

<ul>
  <li>https://www.jetbrains.com/decompiler/download/</li>
</ul>

<p>‍</p>

<blockquote>
  <p>Both dotPeek and dnSpy are .NET decompilers and code viewers, but they have some differences in terms of features and capabilities.</p>

  <p>dotPeek is a lightweight and user-friendly tool that is well-suited for viewing and analyzing code, while dnSpy is a more advanced tool that includes a debugger and is better suited for reverse engineering and modifying code.</p>
</blockquote>

<p>‍</p>

<h3 id="front-end-code-viewing-tool">Front-end code viewing tool.</h3>

<h4 id="visual-studio">Visual Studio</h4>

<p>Visual Studio provides a range of features and tools that make ASP.NET development easier and more efficient.</p>

<ol>
  <li>Visual Design: Visual Studio includes a visual design tool that allows developers to create ASP.NET web pages using drag-and-drop controls. This helps developers create visually appealing and responsive web pages quickly.</li>
</ol>

<p>In the work of code review, we often face the dilemma of having only .aspx files and binary files. Visual Studio can display front-end pages with only .aspx files, which is very helpful for our auditing of front-end forms and input parameters.</p>

<p>It is recommended to use Visual Studio 2015 or later versions as they can intergrate better with Fortify SCA.</p>

<p>‍</p>

<h3 id="third-part-component-check">Third part component check</h3>

<ul>
  <li><a href="https://relevant.software/blog/dependency-check-guide-vulnerabilities-open-source-software/">Dependency Check Guide to Help You Find Vulnerabilities in Open-source Software Components</a></li>
</ul>

<p>‍</p>

<h4 id="dependencycheck">DependencyCheck</h4>

<p>Download link：<a href="https://github.com/jeremylong/DependencyCheck">DependencyCheck</a><em>**</em></p>

<p><strong>Environment required：</strong></p>

<blockquote>
  <ol>
    <li>
      <p>To analyze .NET Assemblies the dotnet 6 run time or SDK must be installed.</p>

      <ul>
        <li>Assemblies targeting other run times can be analyzed - but 6 is required to run the analysis.</li>
      </ul>
    </li>
  </ol>
</blockquote>

<p><strong>Usgae：</strong></p>

<p>On *nix</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./bin/dependency-check.sh -h
$ ./bin/dependency-check.sh --out . --scan [path to jar files to be scanned]
</code></pre></div></div>

<p>On Windows</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; .\bin\dependency-check.bat -h
&gt; .\bin\dependency-check.bat --out . --scan [path to jar files to be scanned]
</code></pre></div></div>

<p>On Mac with <a href="http://brew.sh/">Homebrew</a> Note - homebrew users upgrading from 5.x to 6.0.0 will need to run <code class="language-plaintext highlighter-rouge">dependency-check.sh --purge</code>​.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ brew update &amp;&amp; brew install dependency-check
$ dependency-check -h
$ dependency-check --out . --scan [path to jar files to be scanned]
</code></pre></div></div>

<p>‍</p>

<p>‍</p>

<h3 id="other-tools">Other tools</h3>

<h4 id="c-online">C# Online</h4>
<ul>
  <li><a href="http://cs.jsrun.net/">C#在线编译器 </a></li>
</ul>

<p>‍</p>

<h4 id="sonarsource">SonarSource</h4>

<p>‍</p>

<h4 id="security-code-scan">Security Code Scan</h4>

<p><a href="https://security-code-scan.github.io/#IntegrationwithContinuousIntegration(CI)buildsandthird-partytools">static code analyzer for .NET</a></p>

<h5 id="installation">Installation</h5>

<ul>
  <li><a href="https://marketplace.visualstudio.com/items?itemName=JaroslavLobacevski.SecurityCodeScanVS2019">Visual Studio extension</a>. Use the link or open “Tools &gt; Extensions and Updates…” Select “Online” in the tree on the left and search for SecurityCodeScan in the right upper field. Click “Download” and install.</li>
  <li>
    <p><a href="https://www.nuget.org/packages/SecurityCodeScan.VS2019/">NuGet package</a>.</p>

    <ul>
      <li>Right-click on the root item in your solution. Select “Manage NuGet Packages for Solution…”. Select “Browse” on the top and search for SecurityCodeScan.VS2019. Select project you want to install into and click “Install”.</li>
      <li>Another option is to install the package into all projects in a solution: use “Tools &gt; NuGet Package Manager &gt; Package Manager Console”. Run the command <code class="language-plaintext highlighter-rouge">Get-Project -All | Install-Package SecurityCodeScan.VS2019</code>​.</li>
    </ul>
  </li>
  <li><a href="https://www.nuget.org/packages/security-scan/">Stand-alone runner</a>. Install with <code class="language-plaintext highlighter-rouge">dotnet tool install --global security-scan</code>​ and run <code class="language-plaintext highlighter-rouge">security-scan /your/solution.sln</code>​. For older .NET 4.x please use <code class="language-plaintext highlighter-rouge">security-scan4x.zip</code>​ from <a href="https://github.com/security-code-scan/security-code-scan/releases">GitHub Releases</a>.</li>
</ul>

<p>‍</p>

<p>‍</p>

<h4 id="reko">reko</h4>

<ul>
  <li><a href="https://www.dongchuanmin.com/net/4568.html">推荐一款采用 .NET 编写的 反编译到源码工具 Reko</a></li>
</ul>

<p>‍</p>

<h4 id="resharper">ReSharper</h4>

<ul>
  <li><a href="https://www.jetbrains.com/zh-cn/resharper/">适用于.NET开发者的Visual Studio扩展</a></li>
</ul>

<p>‍</p>

<h2 id="debug">Debug</h2>

<p>dnSpy provides additional debugging functionality. When debugging .net framework projects, you need to drag the DLLs in the /bin directory into dnSpy. You can determine which DLLs are compiled from developer code, which are third-party libraries, and which are system libraries by observing the file names in the /bin directory.</p>

<p>Here is an example: filenames like App_Web_xxx and App_Code are developer-written code in .net framework projects, App_Code.dll comes from the App_Code directory in the source code, App_Web_xxx comes from other directories, and log4net.dll is a third-party library. DLLs starting with “System” are generally system libraries.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">├──</span> <span class="n">ADO</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">AjaxControlToolkit</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">AntiXSSLibrary</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">Apmtech</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Browsers</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Code</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_global</span><span class="p">.</span><span class="n">asax</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_0pk0kvkf</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_0xkl5pmw</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_d4msxdcz</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_elxhpigl</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_fyo2axmt</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_jgcwvu0c</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_kcgcewvf</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_liiehwei</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_lond3s1y</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_lqvh1efk</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_o24jbtmm</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_oovjeiib</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_r3tukein</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_WebReferences</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_wcbicfv1</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_yjumwbb1</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">App_Web_yqwe0f2h</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">log4net</span><span class="p">.</span><span class="n">dll</span>
<span class="err">├──</span> <span class="n">System</span><span class="p">.</span><span class="n">Web</span><span class="p">.</span><span class="n">Helpers</span><span class="p">.</span><span class="n">dll</span>
<span class="p">...</span>
</code></pre></div></div>

<p>After dragging the dll into dnSpy, you can also identify the developer’s own code compiled in the .net framework project by version. The version of the developer’s own code is generally 0.0.0.0.</p>

<p>You can perform additional debugging of the .net framework in dnSpy by following these steps:</p>

<p>Debug –&gt; Attach to Process –&gt; w3wp.exe –&gt; Attach</p>

<p>‍</p>

<h3 id="cases-where-breakpoints-are-invalid">Cases where breakpoints are invalid</h3>

<p>In some cases, breakpoints are set but appear to be invalid in dnSpy. This is often because the opened dll is not loaded into memory. The following steps can help resolve this issue:</p>

<ol>
  <li>Search for the class you want to debug in the Search window. Once found, double-click to enter the code page for the class.</li>
  <li>Check the name of the dll where the class is located, such as App_Web_jgcwvu0c.dll.</li>
  <li>In the Modules window, search for this dll and double-click to open it. Often, the opened dll is not the one you previously dragged into dnSpy. This newly opened dll is the one that has actually been loaded into memory.</li>
  <li>Locate the section you want to debug in the newly opened dll, set breakpoints, and attach to debug again.</li>
</ol>

<p>‍</p>

<h2 id="decompile">Decompile</h2>

<p>You can drag all the dlls to be decompiled into dnSpy, then select all –&gt; Export to Project.</p>

<p>You can also use the dnSpy terminal program to decompile in batches. Place the dlls to be decompiled in a directory, and use <code class="language-plaintext highlighter-rouge">dnSpy.Console.exe -o C:\out\path C:\some\path</code>​ to decompile them.</p>

<p>‍</p>

<h1 id="vulnerabilitis">Vulnerabilitis</h1>

<h2 id="vulnerability-samples">Vulnerability Samples</h2>

<ul>
  <li><a href="https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/quality-rules/security-warnings">Security rules</a></li>
  <li><a href="https://rules.sonarsource.com/csharp/RSPEC-6096">SonarQube C# static code analysis rules</a>
‍</li>
</ul>

<h2 id="labs">Labs</h2>

<ul>
  <li><a href="https://github.com/jerryhoff/WebGoat.NET">WebGoat.NET</a> - OWASP WebGoat.NET</li>
  <li><a href="https://github.com/secvulture/dvta">Damn Vulnerable Thick Client App</a> - DVTA is a Vulnerable Thick Client Application developed in C# .NET</li>
  <li><a href="http://aspnet.testsparker.com/">ASP.NET Vulnerable Site</a> - Online .NET application that can be used to practice hacking.</li>
</ul>

<p>‍</p>

<h2 id="blogs">Blogs</h2>

<ul>
  <li><a href="https://www.cnblogs.com/nice0e3/p/15236334.html">初识.Net审计 </a></li>
  <li><a href="https://paper.seebug.org/1894/">卷入.NET WEB</a></li>
  <li><a href="https://www.buaq.net/go-68477.html">记一次靠猜的.net代码审计拿下目标</a></li>
  <li><a href="https://community.sonarsource.com/t/unable-to-trigger-injection-flaws-for-c-with-developer-edition/8619">Unable to trigger injection flaws for C# with Developer Edition</a></li>
</ul>

<p>‍</p>

<h2 id="github-repo">github repo</h2>

<ul>
  <li><a href="https://github.com/guardrailsio/awesome-dotnet-security">awesome-dotnet-security</a></li>
  <li><a href="https://github.com/Ivan1ee/NET-Deserialize/blob/master/.NET%E9%AB%98%E7%BA%A7%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%EF%BC%88%E7%AC%AC%E4%B9%9D%E8%AF%BE%EF%BC%89%20BinaryFormatter%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E.pdf">NET-Deserialize</a></li>
  <li><a href="https://rules.sonarsource.com/csharp/RSPEC-6096">sonar rules C# static code analysis</a></li>
</ul>

<p>‍</p>

<p>‍</p>
</div><section class="article__sharing d-print-none"></section><div class="d-print-none"><footer class="article__footer"><meta itemprop="dateModified" content="2023-03-25T07:15:11+08:00"><!-- start custom article footer snippet -->

<!-- end custom article footer snippet -->
<div class="article__subscribe"><div class="subscribe"><i class="fas fa-rss"></i> <a type="application/rss+xml" href="/feed.xml">Subscribe</a></div>
</div><div class="article__license"><div class="license">
    <p>This work is licensed under a <a itemprop="license" rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">Attribution-NonCommercial 4.0 International</a> license.
      <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">
        <img alt="Attribution-NonCommercial 4.0 International" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" />
      </a>
    </p>
  </div></div></footer>
<div class="article__section-navigator clearfix"><div class="previous"><span>PREVIOUS</span><a href="/env/2023/03/10/Debug-php-with-vscode-in-remote-docker-container.html">Debug php with vscode in remote docker container</a></div><div class="next"><span>NEXT</span><a href="/chatgpt/2023/03/31/ChatGPT-Cyber-Security-Prompts.html">ChatGPT: Cyber Security Prompts</a></div></div></div>

</div>

<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $(function() {
      var $this ,$scroll;
      var $articleContent = $('.js-article-content');
      var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
      var scroll = hasSidebar ? '.js-page-main' : 'html, body';
      $scroll = $(scroll);

      $articleContent.find('.highlight').each(function() {
        $this = $(this);
        $this.attr('data-lang', $this.find('code').attr('data-lang'));
      });
      $articleContent.find('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').each(function() {
        $this = $(this);
        $this.append($('<a class="anchor d-print-none" aria-hidden="true"></a>').html('<i class="fas fa-anchor"></i>'));
      });
      $articleContent.on('click', '.anchor', function() {
        $scroll.scrollToAnchor('#' + $(this).parent().attr('id'), 400);
      });
    });
  });
})();
</script>
</div><section class="page__comments d-print-none"></section></article><!-- start custom main bottom snippet -->

<!-- end custom main bottom snippet -->
</div>
            </div></div></div><div class="page__footer d-print-none">
<footer class="footer py-4 js-page-footer">
  <div class="main"><div itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DumKiy"><meta itemprop="url" content="/"><meta itemprop="description" content="Watch And Learn."><div class="footer__author-links"><div class="author-links">
  <ul class="menu menu--nowrap menu--inline"><li title="Follow me on Github.">
        <a class="button button--circle github-button" itemprop="sameAs" href="https://github.com/DummyKitty" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z" />
</svg>
</div>
        </a>
      </li></ul>
</div>
</div>
    </div><div class="site-info mt-2">
      <div>© DumKiy's blog 2021,
        Powered by <a title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a> & <a
        title="TeXt is a super customizable Jekyll theme." href="https://github.com/kitian616/jekyll-TeXt-theme">TeXt Theme</a>.
      </div>
    </div>
  </div>
</footer>
</div></div>
    </div><script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $body = $('body'), $window = $(window);
    var $pageRoot = $('.js-page-root'), $pageMain = $('.js-page-main');
    var activeCount = 0;
    function modal(options) {
      var $root = this, visible, onChange, hideWhenWindowScroll = false;
      var scrollTop;
      function setOptions(options) {
        var _options = options || {};
        visible = _options.initialVisible === undefined ? false : show;
        onChange = _options.onChange;
        hideWhenWindowScroll = _options.hideWhenWindowScroll;
      }
      function init() {
        setState(visible);
      }
      function setState(isShow) {
        if (isShow === visible) {
          return;
        }
        visible = isShow;
        if (visible) {
          activeCount++;
          scrollTop = $(window).scrollTop() || $pageMain.scrollTop();
          $root.addClass('modal--show');
          $pageMain.scrollTop(scrollTop);
          activeCount === 1 && ($pageRoot.addClass('show-modal'), $body.addClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.on('scroll', hide);
          $window.on('keyup', handleKeyup);
        } else {
          activeCount > 0 && activeCount--;
          $root.removeClass('modal--show');
          $window.scrollTop(scrollTop);
          activeCount === 0 && ($pageRoot.removeClass('show-modal'), $body.removeClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.off('scroll', hide);
          $window.off('keyup', handleKeyup);
        }
        onChange && onChange(visible);
      }
      function show() {
        setState(true);
      }
      function hide() {
        setState(false);
      }
      function handleKeyup(e) {
        // Char Code: 27  ESC
        if (e.which ===  27) {
          hide();
        }
      }
      setOptions(options);
      init();
      return {
        show: show,
        hide: hide,
        $el: $root
      };
    }
    $.fn.modal = modal;
  });
})();
</script><div class="modal modal--overflow page__search-modal d-print-none js-page-search-modal"><script>
(function () {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    // search panel
    var search = (window.search || (window.search = {}));
    var useDefaultSearchBox = window.useDefaultSearchBox === undefined ?
      true : window.useDefaultSearchBox ;

    var $searchModal = $('.js-page-search-modal');
    var $searchToggle = $('.js-search-toggle');
    var searchModal = $searchModal.modal({ onChange: handleModalChange, hideWhenWindowScroll: true });
    var modalVisible = false;
    search.searchModal = searchModal;

    var $searchBox = null;
    var $searchInput = null;
    var $searchClear = null;

    function getModalVisible() {
      return modalVisible;
    }
    search.getModalVisible = getModalVisible;

    function handleModalChange(visible) {
      modalVisible = visible;
      if (visible) {
        search.onShow && search.onShow();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].focus();
      } else {
        search.onShow && search.onHide();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].blur();
        setTimeout(function() {
          useDefaultSearchBox && ($searchInput.val(''), $searchBox.removeClass('not-empty'));
          search.clear && search.clear();
          window.pageAsideAffix && window.pageAsideAffix.refresh();
        }, 400);
      }
    }

    $searchToggle.on('click', function() {
      modalVisible ? searchModal.hide() : searchModal.show();
    });
    // Char Code: 83  S, 191 /
    $(window).on('keyup', function(e) {
      if (!modalVisible && !window.isFormElement(e.target || e.srcElement) && (e.which === 83 || e.which === 191)) {
        modalVisible || searchModal.show();
      }
    });

    if (useDefaultSearchBox) {
      $searchBox = $('.js-search-box');
      $searchInput = $searchBox.children('input');
      $searchClear = $searchBox.children('.js-icon-clear');
      search.getSearchInput = function() {
        return $searchInput.get(0);
      };
      search.getVal = function() {
        return $searchInput.val();
      };
      search.setVal = function(val) {
        $searchInput.val(val);
      };

      $searchInput.on('focus', function() {
        $(this).addClass('focus');
      });
      $searchInput.on('blur', function() {
        $(this).removeClass('focus');
      });
      $searchInput.on('input', window.throttle(function() {
        var val = $(this).val();
        if (val === '' || typeof val !== 'string') {
          search.clear && search.clear();
        } else {
          $searchBox.addClass('not-empty');
          search.onInputNotEmpty && search.onInputNotEmpty(val);
        }
      }, 400));
      $searchClear.on('click', function() {
        $searchInput.val(''); $searchBox.removeClass('not-empty');
        search.clear && search.clear();
      });
    }
  });
})();
</script><div class="search search--dark">
  <div class="main">
    <div class="search__header">Search</div>
    <div class="search-bar">
      <div class="search-box js-search-box">
        <div class="search-box__icon-search"><i class="fas fa-search"></i></div>
        <input type="text" />
        <div class="search-box__icon-clear js-icon-clear">
          <a><i class="fas fa-times"></i></a>
        </div>
      </div>
      <button class="button button--theme-dark button--pill search__cancel js-search-toggle">
        Cancel</button>
    </div>
    <div class="search-result js-search-result"></div>
  </div>
</div>
<script>var SOURCES = window.TEXT_VARIABLES.sources;
var PAHTS = window.TEXT_VARIABLES.paths;
window.Lazyload.js([SOURCES.jquery, PAHTS.search_js], function() {
  var search = (window.search || (window.search = {}));
  var searchData = window.TEXT_SEARCH_DATA || {};

  function memorize(f) {
    var cache = {};
    return function () {
      var key = Array.prototype.join.call(arguments, ',');
      if (key in cache) return cache[key];
      else return cache[key] = f.apply(this, arguments);
    };
  }

  /// search
  function searchByQuery(query) {
    var i, j, key, keys, cur, _title, result = {};
    keys = Object.keys(searchData);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      for (j = 0; j < searchData[key].length; j++) {
        cur = searchData[key][j], _title = cur.title;
        if ((result[key] === undefined || result[key] && result[key].length < 4 )
          && _title.toLowerCase().indexOf(query.toLowerCase()) >= 0) {
          if (result[key] === undefined) {
            result[key] = [];
          }
          result[key].push(cur);
        }
      }
    }
    return result;
  }

  var renderHeader = memorize(function(header) {
    return $('<p class="search-result__header">' + header + '</p>');
  });

  var renderItem = function(index, title, url) {
    return $('<li class="search-result__item" data-index="' + index + '"><a class="button" href="' + url + '">' + title + '</a></li>');
  };

  function render(data) {
    if (!data) { return null; }
    var $root = $('<ul></ul>'), i, j, key, keys, cur, itemIndex = 0;
    keys = Object.keys(data);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      $root.append(renderHeader(key));
      for (j = 0; j < data[key].length; j++) {
        cur = data[key][j];
        $root.append(renderItem(itemIndex++, cur.title, cur.url));
      }
    }
    return $root;
  }

  // search box
  var $result = $('.js-search-result'), $resultItems;
  var lastActiveIndex, activeIndex;

  function clear() {
    $result.html(null);
    $resultItems = $('.search-result__item'); activeIndex = 0;
  }
  function onInputNotEmpty(val) {
    $result.html(render(searchByQuery(val)));
    $resultItems = $('.search-result__item'); activeIndex = 0;
    $resultItems.eq(0).addClass('active');
  }

  search.clear = clear;
  search.onInputNotEmpty = onInputNotEmpty;

  function updateResultItems() {
    lastActiveIndex >= 0 && $resultItems.eq(lastActiveIndex).removeClass('active');
    activeIndex >= 0 && $resultItems.eq(activeIndex).addClass('active');
  }

  function moveActiveIndex(direction) {
    var itemsCount = $resultItems ? $resultItems.length : 0;
    if (itemsCount > 1) {
      lastActiveIndex = activeIndex;
      if (direction === 'up') {
        activeIndex = (activeIndex - 1 + itemsCount) % itemsCount;
      } else if (direction === 'down') {
        activeIndex = (activeIndex + 1 + itemsCount) % itemsCount;
      }
      updateResultItems();
    }
  }

  // Char Code: 13  Enter, 37  ⬅, 38  ⬆, 39  ➡, 40  ⬇
  $(window).on('keyup', function(e) {
    var modalVisible = search.getModalVisible && search.getModalVisible();
    if (modalVisible) {
      if (e.which === 38) {
        modalVisible && moveActiveIndex('up');
      } else if (e.which === 40) {
        modalVisible && moveActiveIndex('down');
      } else if (e.which === 13) {
        modalVisible && $resultItems && activeIndex >= 0 && $resultItems.eq(activeIndex).children('a')[0].click();
      }
    }
  });

  $result.on('mouseover', '.search-result__item > a', function() {
    var itemIndex = $(this).parent().data('index');
    itemIndex >= 0 && (lastActiveIndex = activeIndex, activeIndex = itemIndex, updateResultItems());
  });
});
</script>
</div></div>


<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function scrollToAnchor(anchor, duration, callback) {
      var $root = this;
      $root.animate({ scrollTop: $(anchor).position().top }, duration, function() {
        window.history.replaceState(null, '', window.location.href.split('#')[0] + anchor);
        callback && callback();
      });
    }
    $.fn.scrollToAnchor = scrollToAnchor;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function affix(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroll,
        offsetBottom = 0, scrollTarget = window, scroll = window.document, disabled = false, isOverallScroller = true,
        rootTop, rootLeft, rootHeight, scrollBottom, rootBottomTop,
        hasInit = false, curState;

      function setOptions(options) {
        var _options = options || {};
        _options.offsetBottom && (offsetBottom = _options.offsetBottom);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroll && (scroll = _options.scroll);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $scrollTarget = $(scrollTarget);
        isOverallScroller = window.isOverallScroller($scrollTarget[0]);
        $scroll = $(scroll);
      }
      function preCalc() {
        top();
        rootHeight = $root.outerHeight();
        rootTop = $root.offset().top + (isOverallScroller ? 0 :  $scrollTarget.scrollTop());
        rootLeft = $root.offset().left;
      }
      function calc(needPreCalc) {
        needPreCalc && preCalc();
        scrollBottom = $scroll.outerHeight() - offsetBottom - rootHeight;
        rootBottomTop = scrollBottom - rootTop;
      }
      function top() {
        if (curState !== 'top') {
          $root.removeClass('fixed').css({
            left: 0,
            top: 0
          });
          curState = 'top';
        }
      }
      function fixed() {
        if (curState !== 'fixed') {
          $root.addClass('fixed').css({
            left: rootLeft + 'px',
            top: 0
          });
          curState = 'fixed';
        }
      }
      function bottom() {
        if (curState !== 'bottom') {
          $root.removeClass('fixed').css({
            left: 0,
            top: rootBottomTop + 'px'
          });
          curState = 'bottom';
        }
      }
      function setState() {
        var scrollTop = $scrollTarget.scrollTop();
        if (scrollTop >= rootTop && scrollTop <= scrollBottom) {
          fixed();
        } else if (scrollTop < rootTop) {
          top();
        } else {
          bottom();
        }
      }
      function init() {
        if(!hasInit) {
          var interval, timeout;
          calc(true); setState();
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState();
          });
          $window.on('resize', function() {
            disabled || (calc(true), setState());
          });
          hasInit = true;
        }
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions,
        refresh: function() {
          calc(true, { animation: false }); setState();
        }
      };
    }
    $.fn.affix = affix;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function toc(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroller, $tocUl = $('<ul class="toc toc--ellipsis"></ul>'), $tocLi, $headings, $activeLast, $activeCur,
        selectors = 'h1,h2,h3', container = 'body', scrollTarget = window, scroller = 'html, body', disabled = false,
        headingsPos, scrolling = false, hasRendered = false, hasInit = false;

      function setOptions(options) {
        var _options = options || {};
        _options.selectors && (selectors = _options.selectors);
        _options.container && (container = _options.container);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroller && (scroller = _options.scroller);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $headings = $(container).find(selectors).filter('[id]');
        $scrollTarget = $(scrollTarget);
        $scroller = $(scroller);
      }
      function calc() {
        headingsPos = [];
        $headings.each(function() {
          headingsPos.push(Math.floor($(this).position().top));
        });
      }
      function setState(element, disabled) {
        var scrollTop = $scrollTarget.scrollTop(), i;
        if (disabled || !headingsPos || headingsPos.length < 1) { return; }
        if (element) {
          $activeCur = element;
        } else {
          for (i = 0; i < headingsPos.length; i++) {
            if (scrollTop >= headingsPos[i]) {
              $activeCur = $tocLi.eq(i);
            } else {
              $activeCur || ($activeCur = $tocLi.eq(i));
              break;
            }
          }
        }
        $activeLast && $activeLast.removeClass('active');
        ($activeLast = $activeCur).addClass('active');
      }
      function render() {
        if(!hasRendered) {
          $root.append($tocUl);
          $headings.each(function() {
            var $this = $(this);
            $tocUl.append($('<li></li>').addClass('toc-' + $this.prop('tagName').toLowerCase())
              .append($('<a></a>').text($this.text()).attr('href', '#' + $this.prop('id'))));
          });
          $tocLi = $tocUl.children('li');
          $tocUl.on('click', 'a', function(e) {
            e.preventDefault();
            var $this = $(this);
            scrolling = true;
            setState($this.parent());
            $scroller.scrollToAnchor($this.attr('href'), 400, function() {
              scrolling = false;
            });
          });
        }
        hasRendered = true;
      }
      function init() {
        var interval, timeout;
        if(!hasInit) {
          render(); calc(); setState(null, scrolling);
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState(null, scrolling);
          });
          $window.on('resize', window.throttle(function() {
            if (!disabled) {
              render(); calc(); setState(null, scrolling);
            }
          }, 100));
        }
        hasInit = true;
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions
      };
    }
    $.fn.toc = toc;
  });
})();
/*(function () {

})();*/
</script><script>
  /* toc must before affix, since affix need to konw toc' height. */(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  var TOC_SELECTOR = window.TEXT_VARIABLES.site.toc.selectors;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window);
    var $articleContent = $('.js-article-content');
    var $tocRoot = $('.js-toc-root'), $col2 = $('.js-col-aside');
    var toc;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
    var hasToc = $articleContent.find(TOC_SELECTOR).length > 0;

    function disabled() {
      return $col2.css('display') === 'none' || !hasToc;
    }

    tocDisabled = disabled();

    toc = $tocRoot.toc({
      selectors: TOC_SELECTOR,
      container: $articleContent,
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      tocDisabled = disabled();
      toc && toc.setOptions({
        disabled: tocDisabled
      });
    }, 100));

  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window), $pageFooter = $('.js-page-footer');
    var $pageAside = $('.js-page-aside');
    var affix;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');

    affix = $pageAside.affix({
      offsetBottom: $pageFooter.outerHeight(),
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      scroll: hasSidebar ? $('.js-page-main').children() : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      affix && affix.setOptions({
        disabled: tocDisabled
      });
    }, 100));

    window.pageAsideAffix = affix;
  });
})();
</script><script>
  window.Lazyload.js(['https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js', 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js'], function() {
    var $canvas = null, $this = null, _ctx = null, _text = '';
    $('.language-chart').each(function(){
      $this = $(this);
      $canvas = $('<canvas></canvas>');
      _text = $this.text();
      $this.text('').append($canvas);
      _ctx = $canvas.get(0).getContext('2d');
      (_ctx && _text) && (new Chart(_ctx, JSON.parse(_text)) && $this.attr('data-processed', true));
    });
  });
</script>
<script type="text/x-mathjax-config">
	var _config = { tex2jax: {
		inlineMath: [['$','$'], ['\\(','\\)']]
	}};_config.TeX = { equationNumbers: { autoNumber: "all" } };MathJax.Hub.Config(_config);
</script>
<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<script>
  window.Lazyload.js('https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js', function() {
    mermaid.initialize({
      startOnLoad: true
    });
    mermaid.init(undefined, '.language-mermaid');
  });
</script>

    </div>
    <script>(function () {
  var $root = document.getElementsByClassName('root')[0];
  if (window.hasEvent('touchstart')) {
    $root.dataset.isTouch = true;
    document.addEventListener('touchstart', function(){}, false);
  }
})();
</script>
  </body>
</html>

